---
phase: 06-i18n-infrastructure-and-routing
plan: 04
type: execute
wave: 3
depends_on: ["06-03"]
files_modified: []
autonomous: false
requirements:
  - I18N-01
  - I18N-02
  - I18N-03
  - I18N-04
  - I18N-05
  - I18N-06

must_haves:
  truths:
    - "Human has verified all 5 Phase 6 success criteria from the roadmap"
    - "No regressions observed in the English audit flow"
  artifacts: []
  key_links: []
---

<objective>
Human verification of the complete Phase 6 i18n infrastructure — URL routing, language toggle, navigation prefix, value/label separation, and shareable URLs.

Purpose: Phase 6 touches routing, form components, and navigation across the entire app. Visual and functional verification by a human ensures no regressions before Phase 7 builds on this foundation.
Output: Confirmation that all 5 roadmap success criteria pass.
</objective>

<execution_context>
@C:/Users/Emil/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Emil/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/phases/06-i18n-infrastructure-and-routing/06-01-SUMMARY.md
@.planning/phases/06-i18n-infrastructure-and-routing/06-02-SUMMARY.md
@.planning/phases/06-i18n-infrastructure-and-routing/06-03-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify Phase 6 i18n infrastructure</name>
  <files>src/App.tsx</files>
  <action>
Human verification checkpoint. Present the verification checklist below and wait for user approval.

What was built: Complete i18n infrastructure — i18next initialization, URL-based language routing with `/:lang?` optional segment, LangLayout wrapper, useLang() hook, LanguageToggle component, value/label form component refactor, and language-prefix-aware navigation across all pages.
  </action>
  <verify>
Run `npm run dev` and test each of the 5 roadmap success criteria:

**Criterion 1 — URL-based language detection:**
1. Visit `http://localhost:8080/` — confirm the landing page loads (Bulgarian default)
2. Visit `http://localhost:8080/en/` — confirm the landing page loads in English
3. Visit `http://localhost:8080/bg/` — confirm it loads in Bulgarian (same as `/`)

**Criterion 2 — Language toggle behavior:**
4. On the landing page, confirm a BG/EN toggle is visible
5. Click "EN" — confirm URL changes to `/en/` and page shows English
6. Click "BG" — confirm URL changes to `/` and page shows Bulgarian
7. Start an audit and go to Step 1 — confirm toggle is visible
8. Advance to Step 2 — confirm toggle is completely gone from the page

**Criterion 3 — Full audit flow preserves language prefix:**
9. Visit `/en/`, start a Home Services audit
10. Navigate through all 8 steps — confirm URL stays `/en/audit?...` throughout
11. Submit the form — confirm redirect goes to `/en/generating`
12. After generation, confirm you land on `/en/report/:id`
13. Repeat steps 9-12 from `/` (Bulgarian) and confirm no `/en/` prefix appears

**Criterion 4 — Form values are language-neutral:**
14. Open browser DevTools → Application → Local Storage
15. Check `ep_audit_state_form` — confirm dropdown/checkbox values are English strings (e.g., "ServiceTitan", not any Bulgarian text)
16. Verify the scoring page shows the same scores whether you ran the flow from `/` or `/en/`

**Criterion 5 — Shareable report URL:**
17. Copy the report URL from step 12 (e.g., `/en/report/abc-123`)
18. Open it in a new incognito window — confirm it loads in English
19. Copy a Bulgarian report URL (e.g., `/report/abc-123`)
20. Open it in a new incognito window — confirm it loads in Bulgarian
  </verify>
  <done>Human has verified all 5 Phase 6 success criteria. Type "approved" if all criteria pass, or describe specific issues to fix.</done>
</task>

</tasks>

<verification>
All 5 Phase 6 success criteria from ROADMAP.md confirmed by human testing.
</verification>

<success_criteria>
- Human has tested and confirmed all 5 roadmap success criteria for Phase 6
- No visual or behavioral regressions in the audit flow
- Phase 6 is ready for Phase 7 (English Translation Pass) to build upon
</success_criteria>

<output>
After completion, create `.planning/phases/06-i18n-infrastructure-and-routing/06-04-SUMMARY.md`
</output>
