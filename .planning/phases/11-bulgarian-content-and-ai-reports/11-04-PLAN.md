---
phase: 11-bulgarian-content-and-ai-reports
plan: 04
type: execute
wave: 2
depends_on: ["11-01", "11-02", "11-03"]
files_modified: []
autonomous: false
requirements: [TRANS-01, TRANS-04, TRANS-05, AI-01, AI-02, AI-03]

must_haves:
  truths:
    - "Landing page at /bg/ displays entirely in Bulgarian"
    - "Form options show Bulgarian-market platforms and EUR pricing for BG users"
    - "AI report is generated in Bulgarian for BG users"
    - "Rate-limit error displays in Bulgarian for BG users"
    - "English experience is unchanged"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete Bulgarian experience end-to-end: landing page, form options, and AI report generation.

Purpose: All three implementation plans are complete. This checkpoint validates that the integrated experience works correctly before marking Phase 11 as complete.

Output: Human verification that the Bulgarian experience meets all success criteria.
</objective>

<execution_context>
@C:/Users/Emil/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Emil/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-bulgarian-content-and-ai-reports/11-01-SUMMARY.md
@.planning/phases/11-bulgarian-content-and-ai-reports/11-02-SUMMARY.md
@.planning/phases/11-bulgarian-content-and-ai-reports/11-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build verification and translation key coverage check</name>
  <files></files>
  <action>
Run automated checks:

1. `npm run build` — must pass with zero errors
2. `npm run test` — must pass all existing tests
3. Translation key coverage: verify every key in en/*.json exists in bg/*.json for all 5 namespaces. Run a quick node script:

```javascript
const fs = require('fs');
const namespaces = ['common', 'landing', 'steps', 'generating', 'report'];
let allMatch = true;

function getKeys(obj, prefix = '') {
  return Object.entries(obj).flatMap(([k, v]) => {
    const key = prefix ? `${prefix}.${k}` : k;
    if (typeof v === 'object' && v !== null && !Array.isArray(v)) return getKeys(v, key);
    return [key];
  });
}

for (const ns of namespaces) {
  const en = JSON.parse(fs.readFileSync(`public/locales/en/${ns}.json`, 'utf8'));
  const bg = JSON.parse(fs.readFileSync(`public/locales/bg/${ns}.json`, 'utf8'));
  const enKeys = new Set(getKeys(en));
  const bgKeys = new Set(getKeys(bg));
  const missing = [...enKeys].filter(k => !bgKeys.has(k));
  if (missing.length > 0) {
    console.log(`MISSING in bg/${ns}.json:`, missing);
    allMatch = false;
  }
}
console.log(allMatch ? 'ALL KEYS MATCH' : 'MISSING KEYS FOUND');
```

4. Verify generate-report edge function has `buildBulgarianPrompt` function and reads `language` param
5. Verify Loading.tsx passes `language: lang` to generate-report
  </action>
  <verify>Build passes, tests pass, all translation keys present in Bulgarian files.</verify>
  <done>Automated verification confirms structural correctness.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Human verification of complete Bulgarian experience</name>
  <action>
Complete Bulgarian experience for BizAudit: Bulgarian translation files (5 namespaces), Bulgarian-market form options with EUR pricing, language-aware AI report generation with Bulgarian prompt template, and internationalized rate-limit error handling.

Verification steps:
1. Start the dev server: `npm run dev`
2. Navigate to `http://localhost:8080/bg/`
3. Verify landing page is entirely in Bulgarian (hero, benefits, niche cards, how-it-works)
4. Click a niche card (e.g., Home Services) — verify CTA and transition work
5. In Step 1: verify sub-niche selector labels are in Bulgarian, revenue dropdown shows EUR tiers (e.g., "Под 25 000 €")
6. Navigate to Step 2: verify CRM options are reasonable for BG market
7. Navigate to Step 3: verify lead source options include Bulgarian platforms (OLX.bg, etc. for HS; imot.bg, homes.bg for RE)
8. Switch to English (`http://localhost:8080/`) and verify original US-market options appear (USD revenue, Zillow, etc.)
9. (Optional) If testing AI: complete a BG audit to verify report generates in Bulgarian

Review the 5 bg/*.json translation files for Bulgarian language quality — check for grammatical accuracy, formal tone (Вие), and natural business language.
  </action>
  <verify>Human confirms all Bulgarian experience items pass visual and functional inspection.</verify>
  <done>Human types "approved" confirming the Bulgarian experience meets quality standards.</done>
</task>

</tasks>

<verification>
1. Build and tests pass
2. Translation key coverage: 100% (every EN key has a BG counterpart)
3. Human verification confirms Bulgarian experience meets expectations
</verification>

<success_criteria>
- Human confirms the /bg/ landing page is fully Bulgarian
- Human confirms form options show BG-market platforms and EUR pricing
- Human confirms English experience is unchanged
- Build and tests pass
</success_criteria>

<output>
After completion, create `.planning/phases/11-bulgarian-content-and-ai-reports/11-04-SUMMARY.md`
</output>
